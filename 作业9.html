

<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第九周作业</title>
</head>
<body>
    <script>
    document.write('<h1>JS练习题4</h1>')
        {
            document.write('<hr><h2>第一题</h2>');
            let input = document.createElement('input'); 
            let btn = document.createElement('button'); 
            btn.innerHTML = '逆序';
            document.body.appendChild(input);
            document.body.appendChild(btn);
            btn.onclick = function () {
                input.value = input.value.split('.').reverse().join('.');
            }
        }
        {
            document.write('<hr><h2>第二题</h2>');
            let input = document.createElement('input'); 
            let btn = document.createElement('button'); 
            btn.innerHTML = '替换';
            document.body.appendChild(input);
            document.body.appendChild(btn);
            btn.onclick = function () {
                let regValue = /(\d{1,3}\.){3}\d{1,3}$/;
                let arrIP = input.value.split('.');
                for(let i = 0; i < arrIP.length; i++){
                    if(arrIP[i] < 0 || arrIP[i] > 255){
                        alert('请输入0~255！');
                        input.value = '';
                        return;
                    }
                }
                if(!regValue.test(input.value)){
                    alert('你输入的不是正确ip格式！');
                    input.value = '';
                } else{
                    input.value = input.value.slice(0, input.value.lastIndexOf('.') + 1) + '*';
                }
            }
        }
        {
            document.write('<hr><h2>第三题</h2>');
            let p = document.createElement('p');
            document.body.appendChild(p);
            updateTime()
            let timer = setInterval(updateTime, 1000);
            function updateTime(){
                let T = new Date();
                T.getWeek = () => {
                    let weeks = ['日','一','二','三','四','五','六'];
                    return weeks[T.getDay()];
                }
                let [Y,M,D,S,m,s,W] = [ T.getFullYear(),
                                    T.getMonth() + 1,
                                    T.getDate(),
                                    T.getHours(),
                                    T.getMinutes(),
                                    T.getSeconds(),
                                    T.getWeek()]
                
                p.innerHTML = `${Y}年${M}月${D}日<br>${S}时${m}分${s}秒<br>星期${W}`;
            }
        }
        {
            document.write('<hr><h2>第四题</h2>');
            let input = document.createElement('input'); 
            let btn = document.createElement('button'); 
            let p = document.createElement('p');
            btn.innerHTML = '确认';
            document.body.appendChild(input);
            document.body.appendChild(btn);
            document.body.appendChild(p);
            btn.onclick = () => {
                let regValue = /^.{2,10}$/;
                p.innerHTML = `字符串长度${regValue.test(input.value) ? '' : '不'}符合要求`;
            }
        }
    document.write('<hr><h1>JS练习题5</h1>')
    {
        document.write('<hr><h2>第二题</h2>');
        let p = document.createElement('p');
        document.body.appendChild(p);
        function rand(min, max) {
            return Math.round((Math.random() * max - min) + min);
        }
        let timer = setInterval(randNum, 500);
        randNum()
        function randNum(){
            p.innerHTML = '';
            for(let i = 0; i < 4; i++){
                p.innerHTML += rand(0,9);
            }
        }
    }
    document.write('<hr><h2>四则运算</h2>');
    </script>

    <input type="text" class="num1">
    <select name="operation" id="operation">
        <option value="plus">+</option>
        <option value="subtract">-</option>
        <option value="multiply">*</option>
        <option value="divide">/</option>
    </select>
    <input type="text" class="num2">
    <button class="submit">=</button>
    <input type="text" class="result">

    <script>
        let num1 = document.querySelector('.num1');
        let num2 = document.querySelector('.num2');
        let result = document.querySelector('.result');
        let operation = document.querySelector('#operation');
        let btn = document.querySelector('.submit');
        btn.onclick = () => {
            let [v1, v2] = [+num1.value.trim(), +num2.value.trim()];
            if(num1.value === '' || isNaN(v1)){
                result.value = '';
                alert('您第一个输入框中不是数字，请重新输入！');
                return;
            }
            if(num2.value === '' || isNaN(v2)){
                result.value = '';
                alert('您第二个输入框中不是数字，请重新输入！');
                return;
            }
            if(v2 === 0 && operation.value === 'divide'){
                result.value = '';
                alert('除法第二个值不能为零！');
                return;
            }
            switch (operation.value){
                case 'plus':
                    result.value = v1 + v2;
                break;
                case 'subtract':
                    result.value = v1 - v2;
                break;
                case 'multiply':
                    result.value = v1 * v2;
                break;
                case 'divide':
                    result.value = v1 / v2;
                break;
            }
        }
    </script>
</body>
</html>
